# Production Environment Variables for VPS Deployment
# Copy this to .env.production and fill in your actual values
# NEVER commit .env.production to git!

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================
DATABASE_URL=postgresql+asyncpg://storyuser:CHANGE_THIS_PASSWORD@db:5432/stories
POSTGRES_USER=storyuser
POSTGRES_PASSWORD=CHANGE_THIS_TO_STRONG_PASSWORD

# ==============================================================================
# OPENAI API CONFIGURATION (Required)
# ==============================================================================
OPENAI_API_KEY=sk-your-actual-openai-api-key-here

# Models for different tasks
OPENAI_MODEL=gpt-4o-mini
OPENAI_PREMISE_MODEL=gpt-4o-mini
OPENAI_EVAL_MODEL=gpt-4o-mini

# Token limits for generation
OPENAI_MAX_TOKENS_CHAPTER=2000
OPENAI_MAX_TOKENS_PREMISE=1500
OPENAI_MAX_TOKENS_EVAL=800

# Temperature settings (0.0-2.0, higher = more creative)
OPENAI_TEMPERATURE_CHAPTER=1.0
OPENAI_TEMPERATURE_PREMISE=1.2
OPENAI_TEMPERATURE_EVAL=0.3

# ==============================================================================
# STORY GENERATION PARAMETERS
# ==============================================================================
# Time between chapter generations (seconds)
CHAPTER_INTERVAL_SECONDS=300

# How often to evaluate story quality (every N chapters)
EVALUATION_INTERVAL_CHAPTERS=3

# Worker check interval (seconds)
WORKER_TICK_INTERVAL=15

# Active story pool size
MIN_ACTIVE_STORIES=3
MAX_ACTIVE_STORIES=5

# Story context and limits
CONTEXT_WINDOW_CHAPTERS=5
MAX_CHAPTERS_PER_STORY=50
MIN_CHAPTERS_BEFORE_EVAL=3

# Chaos parameter ranges (0.0 - 1.0)
CHAOS_INITIAL_MIN=0.05
CHAOS_INITIAL_MAX=0.25
CHAOS_INCREMENT_MIN=0.02
CHAOS_INCREMENT_MAX=0.15

# ==============================================================================
# QUALITY EVALUATION WEIGHTS (Must sum to 1.0)
# ==============================================================================
QUALITY_SCORE_MIN=0.6
COHERENCE_WEIGHT=0.35
NOVELTY_WEIGHT=0.25
ENGAGEMENT_WEIGHT=0.25
PACING_WEIGHT=0.15

# ==============================================================================
# PREMISE PROMPT DYNAMICS
# ==============================================================================
PREMISE_PROMPT_REFRESH_INTERVAL=6
PREMISE_PROMPT_STATS_WINDOW=12
PREMISE_PROMPT_VARIATION_STRENGTH=0.65

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================
LOG_LEVEL=INFO
LOG_DIR=/app/logs
LOG_MAX_BYTES=5000000
LOG_BACKUP_COUNT=5

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================
ENABLE_WEBSOCKET=true

# ==============================================================================
# ADMIN AUTHENTICATION (Required - Change These!)
# ==============================================================================
# Admin username for protected endpoints
ADMIN_USERNAME=admin

# Admin password (will be hashed automatically on startup)
ADMIN_PASSWORD=CHANGE_THIS_TO_STRONG_PASSWORD

# Alternatively, you can set ADMIN_PASSWORD_HASH to a bcrypt hash and leave
# ADMIN_PASSWORD unset. Only one of these may be blank.
# ADMIN_PASSWORD_HASH=

# Session secret for cookie signing (MUST be random and secure!)
# Generate with: openssl rand -hex 32
SESSION_SECRET=CHANGE_THIS_TO_RANDOM_64_CHAR_HEX_STRING

# Session lifetime (seconds, default: 1 week)
SESSION_TTL_SECONDS=604800

# Session cookie configuration
SESSION_COOKIE_NAME=novellone_session

# IMPORTANT: Set to true for HTTPS deployments
SESSION_COOKIE_SECURE=true

# Cookie SameSite policy (lax is recommended)
SESSION_COOKIE_SAMESITE=lax

# ==============================================================================
# CORS CONFIGURATION (optional - leave empty to disable cross-origin requests)
# ==============================================================================
# Comma-separated list of allowed origins, e.g. https://hurl.lol,https://app.hurl.lol
CORS_ALLOWED_ORIGINS=
# Allow credentialed requests from the above origins (required for cookie auth)
CORS_ALLOW_CREDENTIALS=true

# ==============================================================================
# PUBLIC URLS (for hurl.lol deployment)
# ==============================================================================
PUBLIC_API_URL=https://hurl.lol

